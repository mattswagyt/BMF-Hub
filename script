-- BMF Hub

-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Remove old UI
for _,v in ipairs(PlayerGui:GetChildren()) do
    if v.Name == "BMF_Hub_GUI" then v:Destroy() end
end

-- Colors
local ACCENT = Color3.fromRGB(200, 20, 20)
local DARK = Color3.fromRGB(18,18,20)
local DARKER = Color3.fromRGB(12,12,14)
local TEXT = Color3.fromRGB(240,240,240)

local function makeUICorner(inst, r)
    local c = Instance.new("UICorner")
    c.CornerRadius = UDim.new(0, r or 8)
    c.Parent = inst
end

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "BMF_Hub_GUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = PlayerGui

local main = Instance.new("Frame")
main.Size = UDim2.new(0, 750, 0, 470)
main.Position = UDim2.new(0.5, -375, 0.5, -235)
main.AnchorPoint = Vector2.new(0.5,0.5)
main.BackgroundColor3 = DARK
makeUICorner(main, 14)
main.Parent = screenGui

-- Dragging
local dragging, dragStart, startPos = false, nil, nil
main.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = main.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then dragging = false end
        end)
    end
end)
main.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Header
local header = Instance.new("Frame")
header.Size = UDim2.new(1,0,0,60)
header.BackgroundColor3 = DARKER
header.Parent = main
makeUICorner(header,14)

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,-12,1,0)
title.Position = UDim2.new(0,12,0,0)
title.BackgroundTransparency = 1
title.Text = "BMF Hub"
title.TextColor3 = ACCENT
title.Font = Enum.Font.GothamBold
title.TextSize = 22
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = header

local keyHint = Instance.new("TextLabel")
keyHint.Size = UDim2.new(0,150,1,0)
keyHint.Position = UDim2.new(1,-160,0,0)
keyHint.BackgroundTransparency = 1
keyHint.Text = "Toggle: Insert"
keyHint.TextColor3 = TEXT
keyHint.Font = Enum.Font.Gotham
keyHint.TextSize = 14
keyHint.TextXAlignment = Enum.TextXAlignment.Right
keyHint.Parent = header

-- Left Scroll Tabs
local sidebar = Instance.new("ScrollingFrame")
sidebar.Size = UDim2.new(0,170,1,-60)
sidebar.Position = UDim2.new(0,0,0,60)
sidebar.ScrollBarThickness = 6
sidebar.BackgroundColor3 = Color3.fromRGB(22,16,16)
sidebar.Parent = main
makeUICorner(sidebar,12)

local sidebarLayout = Instance.new("UIListLayout")
sidebarLayout.Parent = sidebar
sidebarLayout.Padding = UDim.new(0,6)
sidebarLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

-- Categories
local leftTabs = {
    "Main",
    "Local Player",
    "Server",
    "FPS",
    "PVP",
    "Grinding",
    "Building",
    "Stories",
    "Horror",
    "Roleplay",
    "Simulators",
    "Trolling",
    "Admin",
    "Other Scripts",
    "Join our Discord!"
}

local activeLeft = "Main"
local leftTabButtons = {}

-- Center Content
local content = Instance.new("ScrollingFrame")
content.Size = UDim2.new(1,-170,1,-60)
content.Position = UDim2.new(0,170,0,60)
content.BackgroundColor3 = Color3.fromRGB(20,20,22)
content.ScrollBarThickness = 8
content.Parent = main
makeUICorner(content,10)

local contentLayout = Instance.new("UIListLayout")
contentLayout.Padding = UDim.new(0,8)
contentLayout.Parent = content

local function updateCanvas()
    RunService.Heartbeat:Wait()
    local total = 0
    for _,child in pairs(content:GetChildren()) do
        if child:IsA("GuiObject") and child ~= contentLayout then
            total = total + child.AbsoluteSize.Y + 8
        end
    end
    content.CanvasSize = UDim2.new(0,0,0,math.max(total,content.AbsoluteWindowSize.Y))
end

local function makeButton(text, callback)
    local b = Instance.new("TextButton")
    b.Size = UDim2.new(1,-20,0,32) -- smaller height
    b.Position = UDim2.new(0,10,0,0)
    b.BackgroundColor3 = Color3.fromRGB(30,20,20)
    b.TextColor3 = TEXT
    b.Text = text
    b.Font = Enum.Font.GothamSemibold
    b.TextSize = 15
    makeUICorner(b,8)
    b.Parent = content

    b.MouseButton1Click:Connect(function()
        pcall(callback)
    end)

    updateCanvas()
end

-- Script Loader per Category
local function loadTab(tabName)
    for _,child in ipairs(content:GetChildren()) do
        if child ~= contentLayout then child:Destroy() end
    end

    if tabName == "FPS" then
        makeButton("Prison Life - XHit", function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/thesigmacorex/RobloxScripts/main/XHit", true))()
        end)

    elseif tabName == "Horror" then
        makeButton("The Intruder - House", function() loadstring(game:HttpGet('https://raw.githubusercontent.com/mattswagyt/The-Intruder-House-Script/refs/heads/main/Script'))() end)
        makeButton("The Intruder - Mall", function() loadstring(game:HttpGet('https://raw.githubusercontent.com/mattswagyt/Intruder-Mall/refs/heads/main/Script'))() end)
        makeButton("The Intruder - Mineshaft", function() loadstring(game:HttpGet('https://raw.githubusercontent.com/mattswagyt/The-Intruder-Mineshaft/refs/heads/main/Script'))() end)
        makeButton("The Intruder - Hospital", function() loadstring(game:HttpGet('https://raw.githubusercontent.com/mattswagyt/The-Intruder-Hospital/refs/heads/main/Script'))() end)
        makeButton("The Intruder - Subway", function() loadstring(game:HttpGet('https://raw.githubusercontent.com/mattswagyt/The-Intruder-Subway/refs/heads/main/Script'))() end)
        makeButton("Granny Multiplayer", function() loadstring(game:HttpGet('https://raw.githubusercontent.com/mattswagyt/Granny-Multiplayer-Chapter-1/refs/heads/main/Script'))() end)
        makeButton("Eyes the Horror Game", function() loadstring(game:HttpGet('https://raw.githubusercontent.com/mattswagyt/eyes-the-horror-game/refs/heads/main/Script'))() end)
        makeButton("Piggy", function() loadstring(game:HttpGet('https://raw.githubusercontent.com/mattswagyt/BMF-Piggy/refs/heads/main/Script'))() end)
        makeButton("Cheese Escape", function() loadstring(game:HttpGet('https://raw.githubusercontent.com/mattswagyt/Cheese-Escape/refs/heads/main/Script'))() end)

    elseif tabName == "Admin" then
        makeButton("Infinite Yield", function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
        end)

    elseif tabName == "Other Scripts" then
        makeButton("Dex Explorer", function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/infyiff/backup/main/dex.lua"))()
        end)
        makeButton("Chat Bypass", function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/AnnaRoblox/AnnaBypasser/refs/heads/main/AnnaBypasser.lua",true))()
        end)

    else
        -- Default WIP layout
        for i=1,10 do
            makeButton("WIP Feature ("..tabName..")", function()
                print("WIP")
            end)
        end
    end
end

-- Create Sidebar Buttons
for _,name in ipairs(leftTabs) do
    local t = Instance.new("TextButton")
    t.Size = UDim2.new(0.9,0,0,40)
    t.BackgroundColor3 = Color3.fromRGB(35,6,6)
    t.Text = name
    t.TextColor3 = TEXT
    t.Font = Enum.Font.GothamBold
    t.TextSize = 15
    makeUICorner(t,8)
    t.Parent = sidebar
    leftTabButtons[name] = t

    t.MouseButton1Click:Connect(function()
        activeLeft = name
        for n,btn in pairs(leftTabButtons) do
            btn.BackgroundColor3 = (n==activeLeft) and Color3.fromRGB(80,8,8) or Color3.fromRGB(35,6,6)
            btn.TextColor3 = (n==activeLeft) and ACCENT or TEXT
        end
        loadTab(name)
    end)
end

leftTabButtons[activeLeft].BackgroundColor3 = Color3.fromRGB(80,8,8)
leftTabButtons[activeLeft].TextColor3 = ACCENT
loadTab(activeLeft)

-- Toggle UI
local uiVisible = true
UserInputService.InputBegan:Connect(function(input, processed)
    if not processed and input.KeyCode == Enum.KeyCode.Insert then
        uiVisible = not uiVisible
        main.Visible = uiVisible
    end
end)

print("[BMF Hub] Loaded with Scripted Categories âœ…")
